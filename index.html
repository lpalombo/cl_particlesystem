<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="three.js"></script>

		<script type="x-shader/x-vertex" id="vertexShader">
			uniform float delta;

			void main() {

				vec3 p = position;

				p.x += sin(delta) * 1.0;
				p.y += sin(delta) * 1.0;

				vec4 modelViewPosition = modelViewMatrix * vec4(p, 1.0);
				gl_Position = projectionMatrix * modelViewPosition;
			}
		</script>
		<script type="x-shader/x-fragment" id="fragmentShader">
			void main() {
				gl_FragColor = vec4(1.0, 0.5, 0.0, 1.0);
			}
		</script>
		<script>
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

		var renderer = new THREE.WebGLRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.body.appendChild( renderer.domElement );

		var geometry = new THREE.BufferGeometry();
		// create a simple square shape. We duplicate the top left and bottom right
		// vertices because each vertex needs to appear once per triangle.
		var vertices = new Float32Array( [
			-1.0, -1.0,  1.0,
			 1.0, -1.0,  1.0,
			 1.0,  1.0,  1.0,

			 1.0,  1.0,  1.0,
			-1.0,  1.0,  1.0,
			-1.0, -1.0,  1.0
		] );
		var customUniforms = {
        delta: {value: 0}
    };
		// itemSize = 3 because there are 3 values (components) per vertex
		geometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );
		var material = new THREE.ShaderMaterial( {
			uniforms: customUniforms,
			vertexShader: document.getElementById('vertexShader').textContent,
			fragmentShader: document.getElementById('fragmentShader').textContent
		} );
		var mesh = new THREE.Mesh( geometry, material );
		scene.add(mesh);

		camera.position.z = 5;

		render();

		function render() {
			mesh.material.uniforms.delta.value += 0.1;
			renderer.render( scene, camera );
			requestAnimationFrame( render );
		}


		</script>
	</body>
</html>
